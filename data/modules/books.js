'use strict';

import 'isomorphic-fetch';
import {bindActionCreators} from 'redux';
import {checkStatus, parseJSON, sortByName, sortByValueLargest} from '../../utils/utils';


//---------------------------------------------------------------------------------------------
//---------------------------- action type  -------------------------------------------------------
//---------------------------------------------------------------------------------------------

export const APPS_SUCCESS = 'APPS_SUCCESS';


//---------------------------------------------------------------------------------------------
//---------------------------- action creator  -------------------------------------------------------
//---------------------------------------------------------------------------------------------

const appsSuccess = (payload) => {
  return {
    type: APPS_SUCCESS,
    payload
  };
};


//---------------------------------------------------------------------------------------------
//---------------------------- async action creator  -------------------------------------------------------
//---------------------------------------------------------------------------------------------

export const fetchApps = () => {
  return dispatch => {

    return fetch(`http://localhost:2403/apps`)
      .then(checkStatus)
      .then(parseJSON)
      .then(json => dispatch(appsSuccess(json)))
      .catch(error => {
        console.log(error)
        //TODO make error handling to
      });
  };
};

//---------------------------------------------------------------------------------------------
//---------------------------- reducer  -------------------------------------------------------
//---------------------------------------------------------------------------------------------

let initialState = {
  
};

// reducer
export const books = (state = initialState, action = {}) => {

  switch (action.type) {

    case APPS_SUCCESS:
      return {
        ...state,
        list: action.payload
      };
    
    default:
      return state;
  }
}

//---------------------------------------------------------------------------------------------
//---------------------------- selector  -------------------------------------------------------
//---------------------------------------------------------------------------------------------

export const mapStateToProps = state => {
 
  return {
   
  };
};

//---------------------------------------------------------------------------------------------
//---------------------------- Action bind creator  --------------------------------------------
//---------------------------------------------------------------------------------------------
export const mapActionToDispatch = (dispatch) => {
  return bindActionCreators({
   
  }, dispatch)
};

